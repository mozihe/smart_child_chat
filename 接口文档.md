# 接口文档

---

## 一、用户相关接口

### 1. 发送邮箱验证码

**接口地址**: `POST /api/email`  
**接口功能**: 发送验证码至指定邮箱。

#### 请求头
无

#### 请求体

| 参数名  | 类型   | 是否必填 | 说明          |
|---------|--------|----------|---------------|
| email   | string | 必填     | 用户的邮箱地址 |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "uuid": "string"
    }
}
````


| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | object | 是           | 返回的数据内容             |
| uuid    | string | 是           | 唯一标识符，用于后续验证   |

---

### 2. 用户注册

**接口地址**: `POST /api/register`  
**接口功能**: 用户通过邮箱验证码完成注册。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明                              |
|-----------|--------|----------|-----------------------------------|
| mailcode  | string | 必填     | 邮箱验证码的 UUID，由 `/api/email` 返回 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明             |
|-----------|--------|----------|------------------|
| username  | string | 必填     | 用户名           |
| email     | string | 必填     | 注册时使用的邮箱 |
| code      | string | 必填     | 邮箱验证码       |
| password  | string | 必填     | 用户设置的密码   |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 注册接口无返回数据内容     |

---

### 3. 用户登录

**接口地址**: `POST /api/login`  
**接口功能**: 用户通过用户名和密码登录。

#### 请求头
无

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明       |
|-----------|--------|----------|------------|
| username  | string | 必填     | 用户名      |
| password  | string | 必填     | 密码        |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "token": "string"
    }
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | object | 是           | 返回的数据内容             |
| token   | string | 是           | 用户登录后的身份令牌，用于后续接口认证 |

---

### 4. 获取用户信息

**接口地址**: `GET /api/info/{id}`  
**接口功能**: 根据用户 ID 获取用户信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明                     |
|-----------|--------|----------|--------------------------|
| token     | string | 必填     | 用户登录返回的身份令牌     |

#### 路径参数

| 参数名    | 类型   | 是否必填 | 说明         |
|-----------|--------|----------|--------------|
| id        | string | 必填     | 用户的唯一标识符 |

#### 返回格式
````json
    {
    "code": 200,
    "data": {
        "id": "string",
        "username": "string",
        "name": "string",
        "email": "string",
        "contactInfo": "string",
        "avatarUrl": "string",
        "gender": "string",
        "age": "string",
        "idNumber": "string"
    }
}
````
| 字段名       | 类型   | 是否一定返回 | 说明            |
|--------------|--------|--------|-----------------|
| code         | int    | 是      | 状态码，200成功 |
| data         | object | 是      | 返回的数据内容   |
| id           | string | 是      | 用户 ID         |
| username     | string | 是      | 用户名          |
| name         | string | 是      | 姓名            |
| email        | string | 是      | 邮箱地址        |
| contactInfo  | string | 是      | 联系方式        |
| avatarUrl    | string | 否      | 用户头像 URL    |
| gender       | string | 是      | 性别            |
| age          | string | 是      | 年龄            |
| idNumber     | string | 是      | 身份证号        |

---

### 5. 完善用户信息

**接口地址**: `POST /api/complete`  
**接口功能**: 完善用户个人信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明             |
|-----------|--------|----------|------------------|
| token     | string | 必填     | 用户登录返回的身份令牌 |

#### 请求体

| 参数名       | 类型   | 是否必填 | 说明     |
|--------------|--------|----------|----------|
| name         | string | 必填     | 姓名     |
| contactInfo  | string | 必填     | 联系方式 |
| gender       | string | 必填     | 性别     |
| age          | string | 必填     | 年龄     |
| idNumber     | string | 必填     | 身份证号 |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |

---

### 6. 更新用户信息

**接口地址**: `POST /api/update`  
**接口功能**: 更新用户的用户名和头像信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明             |
|-----------|--------|----------|------------------|
| token     | string | 必填     | 用户登录返回的身份令牌 |

#### 请求体

| 参数名     | 类型   | 是否必填 | 说明                            |
|------------|--------|----------|---------------------------------|
| username   | string | 可选     | 新的用户名，不为空时进行更改      |
| avatarUrl  | string | 可选     | 用户头像的 URL，不为空时进行更改 |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |

---

### 7. 修改密码

**接口地址**: `POST /api/changepass`  
**接口功能**: 修改用户密码。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明             |
|-----------|--------|----------|------------------|
| token     | string | 必填     | 用户登录返回的身份令牌 |

#### 请求体

| 参数名   | 类型   | 是否必填 | 说明               |
|----------|--------|----------|--------------------|
| oldPass  | string | 必填     | 用户当前密码        |
| newPass  | string | 必填     | 用户设置的新密码    |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |
---
## 二、问答相关接口

### 1. 获取所有会话信息

**接口地址**: `GET /api/chat/getall`  
**接口功能**: 获取当前用户的所有会话信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "conversations": [
            {
                "id": "string", 
                "title": "string",   
                "theme": "string",   
                "dataUrl": "string"
            }
        ]
    }
}
````
| 字段名          | 类型    | 是否一定返回 | 说明                         |
|-----------------|---------|--------------|------------------------------|
| code            | int     | 是           | 状态码，200表示成功，400失败 |
| data            | object  | 是           | 返回的数据内容               |
| conversations   | array   | 是           | 会话列表，包含多个会话对象   |
| id              | string  | 是           | 会话 ID                      |
| title           | string  | 是           | 会话标题                     |
| theme           | string  | 是           | 会话主题                     |
| dataUrl         | string  | 否           | 上传的文件 URL               |

---

### 2. 获取单个聊天的记录

**接口地址**: `GET /api/chat/getbyid/{id}`  
**接口功能**: 获取指定会话 ID 的所有聊天记录。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 路径参数

| 参数名    | 类型   | 是否必填 | 说明         |
|-----------|--------|----------|--------------|
| id        | string | 必填     | 会话的 ID    |

#### 返回格式
````json
{
    "code": 200,
    "data": [
        {
            "id": "string",
            "role": "string",
            "message": "string",
            "timestamp": "string"
        }
    ]
}
````
| 字段名       | 类型    | 是否一定返回 | 说明                      |
|--------------|---------|--------------|-------------------------|
| code         | int     | 是           | 状态码，200表示成功，400失败       |
| data         | array   | 是           | 聊天记录数组                  |
| id           | string  | 是           | 消息 ID                   |
| role         | string  | 是           | 角色，"user" 或 "assistant" |
| message      | string  | 是           | 消息内容                    |
| timestamp    | string  | 是           | 时间戳                     |

---

### 3. 更新会话信息

**接口地址**: `POST /api/chat/update`  
**接口功能**: 更新指定会话的标题、主题和文件 URL。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明                     |
|-----------|--------|----------|--------------------------|
| id        | string | 必填     | 会话 ID                  |
| title     | string | 可选     | 会话标题                 |
| theme     | string | 可选     | 会话主题                 |
| dataUrl   | string | 可选     | 上传文件的 URL           |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |

---

### 4. 用户输入消息

**接口地址**: `POST /api/chat/input`  
**接口功能**: 用户输入消息，并获取语言模型的回复。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名   | 类型   | 是否必填 | 说明               |
|----------|--------|----------|--------------------|
| id       | string | 必填     | 会话 ID            |
| input    | string | 必填     | 用户输入的消息内容 |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "reply": "string"
    }
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | object | 是           | 返回的数据内容             |
| reply   | string | 是           | 语言模型的回复             |

---

### 5. 删除会话

**接口地址**: `DELETE /api/chat/delete/{id}`  
**接口功能**: 删除指定 ID 的会话。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 路径参数

| 参数名    | 类型   | 是否必填 | 说明         |
|-----------|--------|----------|--------------|
| id        | string | 必填     | 会话的 ID    |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |

---

### 6. 添加会话

**接口地址**: `POST /api/chat/add`  
**接口功能**: 创建新的会话。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明                     |
|-----------|--------|----------|--------------------------|
| title     | string | 可选     | 会话标题                 |
| theme     | string | 可选     | 会话主题                 |
| dataUrl   | string | 可选     | 上传的文件 URL           |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名  | 类型   | 是否一定返回 | 说明                      |
|---------|--------|--------------|---------------------------|
| code    | int    | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |
---
## 三、预约相关接口

### 1. 获取律师列表

**接口地址**: `GET /api/laywer/getall`  
**接口功能**: 获取所有律师的列表信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 返回格式
````json
{
    "code": 200,
    "data": [
        {
            "id": "string",
            "name": "string",
            "info": "string",
            "business": "string", 
            "contact": "string"  
        }
    ]
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                       |
|-----------|---------|--------------|----------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | array   | 是           | 律师信息列表               |
| id        | string  | 是           | 律师的唯一 ID              |
| name      | string  | 是           | 律师姓名                   |
| info      | string  | 是           | 律师简介                   |
| ability   | string  | 是           | 律师的业务能力       |
| contact   | string  | 是           | 律师联系方式               |

---

### 2. 预约律师

**接口地址**: `POST /api/laywer/appointment`  
**接口功能**: 用户预约律师服务。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型    | 是否必填 | 说明                           |
|-----------|---------|----------|--------------------------------|
| laywerId  | string  | 必填     | 律师的 ID                      |
| info      | string  | 必填     | 预约的详细信息或说明           |
| time      | Date    | 必填     | 预约时间，日期格式（ISO 8601）|

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名          | 类型    | 是否一定返回 | 说明                         |
|-----------------|---------|--------------|------------------------------|
| code            | int     | 是           | 状态码，200表示成功，400失败 |
| data    | null   | 是           | 此接口无返回数据内容       |
---
## 四、文件相关接口

### 1. 文件生成

**接口地址**: `POST /api/flod`  
**接口功能**: 根据提供的案情和任务生成诉讼书或律师函。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明                 |
|-----------|--------|----------|----------------------|
| task      | string | 必填     | 生成的文件类型，如“诉讼书”或“律师函” |
| info      | string | 必填     | 具体案情描述         |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "url": "string"
    }
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | object  | 是           | 返回的数据内容               |
| url       | string  | 是           | 生成文件的 URL               |

---

## 五、胜诉相关接口

### 1. 粗略估计胜诉率

**接口地址**: `POST /api/win/pool`  
**接口功能**: 通过案情粗略估计胜诉率。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明                             |
|-----------|--------|----------|----------------------------------|
| info      | string | 必填     | 具体案情描述                     |
| url       | string | 可选     | 用户上传的文件 URL               |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "rate": 0.75
    }
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | object  | 是           | 返回的数据内容               |
| rate      | float   | 是           | 粗略估计的胜诉率，范围 0 到 1 |

---

### 2. 估计胜诉率（VIP用户专用）

**接口地址**: `POST /api/win/power`  
**接口功能**: 通过案情和上传文件估计胜诉率（VIP用户专用）。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明                             |
|-----------|--------|----------|----------------------------------|
| info      | string | 必填     | 具体案情描述                     |
| url       | string | 可选     | 用户上传的文件 URL               |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "rate": 0.75, 
        "advice": 0.80 
    }
}
````
| 字段名    | 类型     | 是否一定返回 | 说明                         |
|--------|--------|--------------|----------------------------|
| code   | int    | 是           | 状态码，200表示成功，400失败，405没有vip |
| data   | object | 是           | 返回的数据内容                    |
| rate   | float  | 是           | 精细估计的胜诉率，范围 0 到 1          |
| advice | string | 是           | 提高胜诉率的方法                   |

---

## 六、评论相关接口

### 1. 获取所有评论

**接口地址**: `GET /api/leave/all`  
**接口功能**: 获取用户所有的评论信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 返回格式
````json
{
    "code": 200,
    "data": [
        {
            "id": "string", 
            "star": 5, 
            "context": "string"
        }
    ]
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | array   | 是           | 评论列表                     |
| id        | string  | 是           | 评论 ID                      |
| star      | int     | 是           | 评论星级，1-5 星             |
| context   | string  | 是           | 评论内容                     |

---

### 2. 提交评论

**接口地址**: `POST /api/leave/put`  
**接口功能**: 提交评论。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| star      | int    | 必填     | 评论星级，1-5 星   |
| context   | string | 必填     | 评论内容           |

#### 返回格式
````json
{
    "code": 200,
    "data": null
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | null    | 是           | 此接口无返回数据内容         |

---

## 七、消息相关接口

### 1. 获取推送消息

**接口地址**: `GET /api/push/all`  
**接口功能**: 获取所有推送信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 返回格式
````json
{
    "code": 200,
    "data": [
        {
            "id": "string",
            "title": "string",
            "context": "string",
            "tag": "string" 
        }
    ]
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | array   | 是           | 消息列表                     |
| id        | string  | 是           | 消息 ID                      |
| title     | string  | 是           | 消息标题                     |
| context   | string  | 是           | 消息内容                     |
| tag       | string  | 是           | 消息标签                     |

---

### 2. 获取售后信息

**接口地址**: `GET /api/news/all`  
**接口功能**: 获取售后信息。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 返回格式
````json
{
    "code": 200,
    "data": [
        {
            "id": "string", 
            "title": "string",
            "context": "string",
            "tag": "callback"
        }
    ]
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | array   | 是           | 售后信息列表                 |
| id        | string  | 是           | 售后信息 ID                  |
| title     | string  | 是           | 售后信息标题                 |
| context   | string  | 是           | 售后信息内容                 |
| tag       | string  | 是           | 售后信息标签（callback 或 blessing）|

---

## 八、工具接口

### 1. 文件上传

**接口地址**: `POST /api/upload`  
**接口功能**: 上传文件。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型    | 是否必填 | 说明               |
|-----------|---------|----------|--------------------|
| file      | file    | 必填     | 上传的文件         |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "url": "string"
    }
}
````
| 字段名    | 类型    | 是否一定返回 | 说明                         |
|-----------|---------|--------------|------------------------------|
| code      | int     | 是           | 状态码，200表示成功，400失败 |
| data      | object  | 是           | 返回的数据内容               |
| url       | string  | 是           | 上传文件的 URL               |
---
### 2. 通用支付接口

**接口地址**: `POST /api/payment`  
**接口功能**: 提供三种支付方式（微信支付、支付宝支付、银行卡支付），用于完成用户支付。

#### 请求头

| 参数名    | 类型   | 是否必填 | 说明               |
|-----------|--------|----------|--------------------|
| token     | string | 必填     | 用户登录后的身份令牌 |

#### 请求体

| 参数名    | 类型   | 是否必填 | 说明                             |
|-----------|--------|----------|----------------------------------|
| amount    | float  | 必填     | 支付金额，单位为元                |
| method    | string | 必填     | 支付方式，可选值：`wechat`（微信支付），`alipay`（支付宝支付），`bank`（银行卡支付） |
| orderId   | string | 必填     | 订单 ID，用于唯一标识支付订单     |
| callback  | string | 可选     | 支付完成后的回调 URL             |

#### 返回格式
````json
{
    "code": 200,
    "data": {
        "paymentUrl": "string",
        "qrCode": "string" 
    }
}
````
| 字段名        | 类型    | 是否一定返回 | 说明                                                                 |
|---------------|---------|--------------|----------------------------------------------------------------------|
| code          | int     | 是           | 状态码，200表示成功，400表示失败                                     |
| data          | object  | 是           | 返回的数据内容                                                       |
| paymentUrl    | string  | 是           | 支付链接，微信支付和支付宝支付返回，银行卡支付返回为银行卡信息     |
| qrCode        | string  | 可选         | 支付二维码 URL，微信支付和支付宝支付返回，银行卡支付无此字段        |
